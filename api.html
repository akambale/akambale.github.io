<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Amogh is learning</title>
    <style>
      body {
        font-family: 'Courier New', Courier, monospace;
        box-sizing: border-box;    
      }

      .api-box {
        display: inline-block;
        margin: 50px;
        max-width: 450px;
      }

      textarea {
        margin: 20px 0px;
        min-height: 500px;
        width: 450px;
        resize: none;
        border: black solid 2px;
      }

      button {
        font-size: 12px;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      // Each request as a different url subdomain. Basic requests are defined here
      var myIPUrl = 'https://api.company-target.com/api/v2/ip.json?key=e2cf2f51d2f440828a79e18aa5e8a737&query=';
      var myDomainUrl = 'https://autocomplete.demandbase.com/api/v3/email.json?key=e2cf2f51d2f440828a79e18aa5e8a737&domain=';

      // Adds text returned from API request to appropriate output box 
      var addText = function(text, id) {

          // Clears appropriate text area box and replaces it with new output
          document.getElementById(id).value = JSON.stringify(text, null, 2);
      }

      var formSubmit = function(inputBoxID) {
        var url;
        var textareaID;
        var inputBoxVal = document.getElementById(inputBoxID).value;

        //using input, determines which API to use
        if (inputBoxID === 'inputIP') {
          url = myIPUrl + inputBoxVal;
          textareaID = 'outputIP';
        } else {
          url = myDomainUrl + inputBoxVal;
          textareaID = 'outputDomain';
        }

        $.ajax({
          type: 'GET',
          url: url,
          complete: function(data) {
            // Calls function addText to print data
            addText(data.responseJSON, textareaID);
          },
          failure: function() { 
            console.log('failed request');
          }
        });
      }

      // sample ip: 107.77.211.182
      // sample ip: 206.77.211.182
    </script>
  </head>
  <body>
    <div class="api-box">
      <form>
        <h3>IP Address Info Returner</h3>
        <p>Enter IP address here. If this field is left blank or the address is invalid, the API will use your IP for the request</p>
        <input type="text" id="inputIP">
        <button type="button" onclick="formSubmit('inputIP')">submit</button>
      </form>
      <textarea id="outputIP"></textarea>
    </div>
    <div class="api-box">
      <form>
        <h3>Domain Info Returner</h3>
        <p>Enter domain name and top level domain (e.g., ".com" ".org") here. If this field is left blank or the address is invalid, the API will return null</p>
        <input type="text" id="inputDomain">
        <button type="button" onclick="formSubmit('inputDomain')">submit</button>
      </form>
      <textarea id="outputDomain"></textarea>
    </div>
  </body>
</html>